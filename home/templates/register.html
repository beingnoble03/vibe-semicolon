{% extends "base.html" %}
{% block title %}
<title>Vibe | Register Portal</title>
{% endblock %}
{% block style %}
<style>
.main{
    margin-left: 50%;
    transform: translate(-50%);
    }
#submit-button{
    float: right;
    }
#about{
  height: 60px;
}    
.input-textbox{
    border: none;
    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.1), 0 2px 8px 0 rgba(0, 0, 0, 0.10),0 2px 8px 0 rgba(0, 0, 0, 0.10);
    text-align: center;
    font-family: 'Abel', sans-serif;
    outline: none;
    background-color: rgb(252, 239, 250);
    margin-bottom: 10px;
}     
</style>
{% endblock %}
{% block navbar %}
<li class="nav-item"><a href="#" class="nav-link disabled" aria-current="page">Dashboard</a></li>
<li class="nav-item"><a href="#" class="nav-link disabled">Feed</a></li>
<li class="nav-item"><a href="#" class="nav-link disabled">Settings</a></li>
{% endblock %}
{% block content %}
<div class="main mb-5">
<main>
    <div class="row g-5">
        <center>
            <b>REGISTER PANEL | VIBE</b><br><small>Enter the required details to get started</small>
        </center>
          <div class="row g-3">
            <div class="col-sm-6">
              <input type="text" class="form-control input-textbox" id="firstName" placeholder="First Name" value="" required>
            </div>

            <div class="col-sm-6">
              <input type="text" class="form-control input-textbox" id="lastName" placeholder="Last Name" value="" required>
            </div>

            <div class="col-sm-6">
              <div class="input-group">
                <span class="input-group-text input-textbox">@</span>
                <input type="text" class="form-control input-textbox" id="username" placeholder="Username" required>
              </div>
            </div>

            <div class="col-sm-6">
                <div class="input-group">
                  <span class="input-group-text input-textbox">üóùÔ∏è</span>
                  <input type="password" class="form-control input-textbox" id="password" placeholder="Password" required>
                </div>
              </div>

            <div class="col-12">
              <input type="email" class="form-control input-textbox" id="email" placeholder="Email Address: you@example.com" required>
            </div>

            <div class="col-12">
              <input type="text" class="form-control input-textbox" id="address" placeholder="Home Address: 1234 Example Sreet" required>
            </div>

            <div class="col-sm-6">
              <input type="text" class="form-control input-textbox" id="bhawan" placeholder="Bhawan Name">
            </div>
            <div class="col-sm-6">
                <select class="form-select input-textbox" id="gender" required>
                  <option value="">Choose Gender</option>
                  <option value="Male">Male</option>
                  <option value="Female">Female</option>
                </select>
              </div>
            <div class="col-md-5">
                <input type="text" class="form-control input-textbox" id="country" placeholder="Home Country">
            </div>

            <div class="col-md-4">
                <input type="text" class="form-control input-textbox" id="state" placeholder="Home State">
            </div>

            <div class="col-md-3">
              <input type="number" class="form-control input-textbox" id="zip" placeholder="Zip Code" required>
            </div>
            <div class="col-sm-6">
              <input type="number" class="form-control input-textbox" id="number" placeholder="Mobile NO. : 0123456789"required >
            </div>
            <div class="col-sm-6">
              <input type="text" class="form-control input-textbox" id="branch" placeholder="BRANCH"required >
            </div>
            <div class="col-12">
                    <textarea class="form-control input-textbox" placeholder = "Write About Yourself" aria-label="With textarea"id="about"></textarea>
            </div>
            <center>
                CHOOSE YOUR TAGS
            </center>
            <div class="card" style="background-color: rgb(252, 239, 250);">
                <div class="card-body">
                    <select class="form-select input-textbox" id="hobby" required>
                        <option value="">Choose Hobbies</option>
                        <option value="Reading">Reading</option>
                        <option value="Movies/Series">Movies/Series</option>
                        <option value="Playing music">Playing music</option>
                        <option value="Sports/Excercise">Sports/Excercise</option>
                        <option value="Others">Others</option>
                        <option value="NONE">NONE Ghissu hu :)</option>
                       
                    </select>
                </div>
                <div class="card-body">
                    <select class="form-select input-textbox" id="food" required>
                        <option value="">Choose Food</option>
                        <option value="Indian">Indian</option>
                        <option value="Chinese">Chinese</option>
                        <option value="Italian">Italian</option>
                        <option value="Contenental">Continental</option>
                        <option value="Mami Ke Hath Ka Khana">Mami ke hath ka khana</option>

                        

                    </select>
                </div>
                <div class="card-body">
                  <select class="form-select input-textbox" id="hangout" required>
                      <option value="">Choose Your Favourite Place</option>
                      <option value="SAC">SAC 1 floor</option>
                      <option value="RKB">RKB tapri</option>
                      <option value="Vasant Kunj Canteen">Vigyan kunj canteen</option>
                      <option value="MAC oat">MAC oat</option>
                      <option value="Senate Steps">Senate steps</option>
                      <option value="Library(introvert)">Library(introvert)</option>
                     

                      

                  </select>
              </div>
              <div class="card-body">
                <select class="form-select input-textbox" id="music-taste" required>
                    <option value="">Music Taste? </option>
                    <option value="Bollywood">Bollywood</option>
                    <option value="Hip Hop">Hip Hop</option>
                    <option value="Rock">Rock</option>
                    <option value="Retro">Retro</option>
                    <option value="Pop">POP</option>
                    <option value="None">None</option>
                </select>
            </div>
            </div>
        </div>
          <button id = "reset" type="button" class="btn btn-outline-primary btn-sm" onclick="reset()" style="margin-bottom: -15px">Reset the Details</button>  
          <button class="w-100 btn btn-primary btn" type="submit" onclick="error()">Register Now!</button>
    </div>
  </main>
</div>
<script>
    function reset(){
        new Notify ({
            status: 'warning',
            title: 'Cleared',
            text: 'Cleared all the fields',
            effect: 'slide',
            speed: 300,
            customClass: '',
            customIcon: '',
            showIcon: true,
            showCloseButton: false,
            autoclose: true,
            autotimeout: 2500,
            gap: 50,
            distance: 20,
            type: 2,
            position: 'right bottom'
        })
        document.getElementById("firstName").value = "";
        document.getElementById("lastName").value = "";
        document.getElementById("gender").value = "";
        document.getElementById("username").value = "";
        document.getElementById("password").value = "";
        document.getElementById("email").value = "";
        document.getElementById("address").value = "";
        document.getElementById("bhawan").value = "";
        document.getElementById("country").value = "";
        document.getElementById("state").value = "";
        document.getElementById("zip").value = "";
        document.getElementById("number").value = "";
        document.getElementById("branch").value = "";
        document.getElementById("about").value = "";
        document.getElementById("hobby").value = "";
        document.getElementById("hangout").value = "";
        document.getElementById("music taste").value = "";
        document.getElementById("food").value = "";
        
        
    }

    function error(){
        if(document.getElementById("firstName").value.trim() == "" || document.getElementById("lastName").value.trim() == ""|| document.getElementById("gender").value.trim() == ""|| document.getElementById("username").value.trim() == ""|| document.getElementById("gender").value.trim() == ""||document.getElementById("firstName").value.trim() == "" || document.getElementById("lastName").value.trim() == ""|| document.getElementById("gender").value.trim() == ""|| document.getElementById("username").value.trim() == ""|| document.getElementById("password").value.trim() == ""|| document.getElementById("email").value.trim() == ""|| document.getElementById("address").value.trim() == ""|| document.getElementById("bhawan").value.trim() == ""|| document.getElementById("country").value.trim() == ""|| document.getElementById("state").value.trim() == ""|| document.getElementById("zip").value.trim() == ""|| document.getElementById("number").value.trim() == ""|| document.getElementById("branch").value.trim() == ""|| document.getElementById("about").value.trim() == ""|| document.getElementById("food").value.trim() == ""|| document.getElementById("hangout").value.trim() == ""|| document.getElementById("music-taste").value.trim() == ""|| document.getElementById("hobby").value.trim() == ""){
            alert("Please fill all the fields correctly.");
        } else {
            new Notify ({
                status: 'warning',
                title: 'Wait',
                text: 'Processing your request...',
                effect: 'slide',
                speed: 300,
                customClass: '',
                customIcon: '',
                showIcon: true,
                showCloseButton: false,
                autoclose: true,
                autotimeout: 2500,
                gap: 50,
                distance: 20,
                type: 2,
                position: 'right bottom'
            })
            $.ajax({
            url: "{% url 'register-user' %}",
            method: "POST",
            data: {
              firstname: document.getElementById("firstName").value,
              lastname: document.getElementById("lastName").value,
              gender: document.getElementById("gender").value,
              username: document.getElementById("username").value,
              password: document.getElementById("password").value,
              email: document.getElementById("email").value,
              address: document.getElementById("address").value,
              bhawan: document.getElementById("bhawan").value,
              country: document.getElementById("country").value,
              state: document.getElementById("state").value,
              zip: document.getElementById("zip").value,
              number: document.getElementById("number").value,
              branch: document.getElementById("branch").value,
              about: document.getElementById("about").value,
              hobby: document.getElementById("hobby").value,
              hangout: document.getElementById("hangout").value,
              music: document.getElementById("music-taste").value,
              food: document.getElementById("food").value,
            },
            success: function(data, status, xhr){
                if(data.created === "yes"){
                    if(!alert("The account has been successfully created.")){
                    if(window.location.href == "/"){
                            window.location.reload();
                        } else {
                            window.location.replace("/");
                        }
                    }
                } else {
                    alert("The account already exists with same username.");
                }
            },
            error: function(xhr, status, err){
                alert(err);
            }

        })
        }
    }
</script>
{% endblock %}